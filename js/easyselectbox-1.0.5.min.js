(function(g){var a=null;var f={init:function(j){var k={classNames:{selectbox:"easy-select-box",displayer:"esb-displayer",dropdown:"esb-dropdown",item:"esb-item"},disabled:false,onBuildList:null,onClick:null,speed:0};j=g.extend(k,j);return this.each(function(){var u=g(this);if("select"!=u[0].nodeName.toLowerCase()){g.error("Not a SELECT element on jQuery.easySelectBox")}else{var v=u.children("option");var l=null;var s=null;var q=u.val();var o=j.classNames.selectbox;var n=j.classNames.displayer;var t=j.classNames.dropdown;var r=j.classNames.item;var m=0;var w="";var p="";g.each(v,function(x,y){text=g(y).text();if(text==""){text="&nbsp;"}p+='<div class="'+r+'">'+text+"</div>";if(q==g(y).val()){m=x}});p='<div class="'+t+'">'+p+"</div>";w='<div class="'+n+'">'+v.eq(m).text()+"</div>";if(j.onBuildList!=null){p=j.onBuildList.call(this,{selectObj:u,options:j,lists:v,initialVal:q})}easySelectHtml='<div tabindex="0" class="'+o+'">'+w+p+"</div>";l=g(easySelectHtml).insertAfter(u);l.addClass("easy-select-"+g("body").find("."+j.classNames.selectbox).index(l));u.hide();displayer=l.children("."+n);dropdown=l.children("."+t);u.data("easySelect",l);l.data("easySelectData",{options:j,selectObj:u,displayer:displayer,dropdown:dropdown,timer:null});if(u.attr("disabled")||j.disabled){l.addClass("disabled")}else{l.bind("click.easyselectbox",c);l.bind("focusin.easyselectbox",i);l.bind("focusout.easyselectbox",h)}}})},option:function(l,n){if(l=="value"){if(n==undefined){return g(this).val()}}if(l=="speed"){if(n==undefined){var o=g(this);var k=o.data("easySelect");var m=k.data("easySelectData");var j=m.options;return j.speed}}return this.each(function(){var v=g(this);var s=v.data("easySelect");if(s==undefined){g.error("easySelectBox not initialized yet.")}else{var t=s.data("easySelectData");var p=t.displayer;var u=t.dropdown;var q=t.options;if(l=="value"){if(n!=undefined){v.val(n);var r=v.find("option:selected").index();e(v,r)}}else{if(l=="index"){if(n!=undefined){e(v,n)}}else{if(l=="speed"){if(n!=undefined){t.options.speed=n;s.data("easySelectData",t)}}else{if(l=="disabled"){if(n!==undefined){if(n==false){s.removeClass("disabled");s.bind("click.easyselectbox",c);s.bind("focusin.easyselectbox",i);s.bind("focusout.easyselectbox",h)}else{s.addClass("disabled");s.unbind("click.easyselectbox");s.unbind("focusin.easyselectbox");s.unbind("focusout.easyselectbox")}}}}}}}})},open:function(j){return this.each(function(){var p=g(this);var m=p.data("easySelect");if(m==undefined){g.error("easySelectBox not initialized yet.")}else{var n=m.data("easySelectData");var p=n.selectObj;var k=n.displayer;var o=n.dropdown;var l=n.options;if(j==null||j==false){m.focus()}if(!o.is(":visible")){d(o,l.speed)}}})},close:function(){return this.each(function(){var o=g(this);var l=o.data("easySelect");if(l==undefined){g.error("easySelectBox not initialized yet.")}else{var m=l.data("easySelectData");var o=m.selectObj;var j=m.displayer;var n=m.dropdown;var k=m.options;if(n.is(":visible")){b(n,k.speed)}}})},select:function(k,j){return this.each(function(){var r=g(this);var o=r.data("easySelect");if(o==undefined){g.error("easySelectBox not initialized yet.")}else{var p=o.data("easySelectData");var r=p.selectObj;var l=p.displayer;var q=p.dropdown;var n=p.options;if(j==undefined||j==null){j=false}var m=-1;if(j==true){m=r.find('option[value="'+k+'"]').index()}else{if(k==""){m=r.find("option:empty").index()}else{r.find("option").each(function(s){if(g(this).html()==k){m=s;return}})}}e(r,m)}})}};g.fn.easySelectBox=function(j){if(f[j]){return f[j].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof j==="object"||!j){return f.init.apply(this,arguments)}else{g.error("Method "+j+" does not exist on jQuery.easySelectBox")}}return false};function c(o){var m=g(this);var n=m.data("easySelectData");var q=n.selectObj;var j=n.displayer;var p=n.dropdown;var l=n.options;if(g(o.target).get(0)==j.get(0)||g(o.target).get(0)==m.get(0)){if(p.is(":visible")){b(p,l.speed)}else{d(p,l.speed)}}else{if(g(o.target).is("."+l.classNames.item)){var k=p.find("."+l.classNames.item).index(g(o.target));e(q,k);if(l.onClick!=null){l.onClick.call(this,{value:q.val(),text:q.find("option").eq(k).html()})}}else{if(g("."+l.classNames.item).has(g(o.target)).length>0){var k=p.find("."+l.classNames.item).index(g(o.target).parents("."+l.classNames.item));e(q,k);if(l.onClick!=null){l.onClick.call(this,{value:q.val(),text:q.find("option").eq(k).html()})}}}}o.stopPropagation()}function d(k,j){k.slideDown(j)}function b(k,j){k.slideUp(j)}function i(n){var l=g(this);var m=l.data("easySelectData");var p=m.selectObj;var j=m.displayer;var o=m.dropdown;var k=m.options;l.addClass("focused");window.clearTimeout(m.timer);n.stopPropagation()}function h(n){var l=g(this);var m=l.data("easySelectData");var p=m.selectObj;var j=m.displayer;var o=m.dropdown;var k=m.options;l.removeClass("focused");if(o.is(":visible")){m.timer=window.setTimeout(function(){b(o,k.speed)},100);l.data("easySelectData",m)}n.stopPropagation()}function e(q,l){var n=q.data("easySelect");var o=n.data("easySelectData");var j=o.displayer;var p=o.dropdown;var k=o.options;var m=q.find("option").eq(l);j.html(m.html());q.find("option").removeAttr("selected");m.attr("selected","selected");if(p.is(":visible")){b(p,k.speed)}}})(jQuery);